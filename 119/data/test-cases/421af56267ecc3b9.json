{"uid":"421af56267ecc3b9","name":"Проверка удаления билда UI","fullName":"tests.frontend.test_e2e_build#test_delete_build","historyId":"ef889c3f503d926b0658418ea80c818b","time":{"start":1712515612130,"stop":1712515615398,"duration":3268},"description":"Тест проверяет удаление билда через UI","descriptionHtml":"<p>Тест проверяет удаление билда через UI</p>\n","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6de3b880>\nsuper_admin = <entities.user.User object at 0x7f5d6d369000>\n\n    @allure.feature('Управление билдами')\n    @allure.story('Удаление билда UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка удаления билда UI')\n    @allure.description('Тест проверяет удаление билда через UI')\n    @pytest.mark.teardown_required\n    def test_delete_build(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n        with allure.step('Создание проекта'):\n            super_admin.api_object.project_api.create_project(project_data.model_dump())\n        with allure.step('Создание билда'):\n            build_data = BuildData.create_build_data(project_data.id)\n            super_admin.api_object.build_api.create_build(build_data.model_dump())\n    \n        with allure.step(\"Удаление билда\"):\n            build_management_browser = BuildManagementPage(browser)\n>           build_management_browser.delete_build_ui(build_data.id, project_data.id)\n\ntests/frontend/test_e2e_build.py:70: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/build_management_page.py:46: in delete_build_ui\n    self.go_to_build_management_page(build_id)\npages/build_management_page.py:40: in go_to_build_management_page\n    self.actions.navigate(self.page_url.format(build_id=build_id))\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6d36abc0>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/viewType.html?buildTypeId=przTY1zPsXm&fromSakuraUI=true'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1712515408505,"stop":1712515408527,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delay_between_tests","time":{"start":1712515605712,"stop":1712515610713,"duration":5001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1712515610713,"stop":1712515612123,"duration":1410},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"super_admin","time":{"start":1712515612123,"stop":1712515612130,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session","time":{"start":1712515612123,"stop":1712515612123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"project_data_body","time":{"start":1712515612130,"stop":1712515612130,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Тест проверяет удаление билда через UI","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6de3b880>\nsuper_admin = <entities.user.User object at 0x7f5d6d369000>\n\n    @allure.feature('Управление билдами')\n    @allure.story('Удаление билда UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка удаления билда UI')\n    @allure.description('Тест проверяет удаление билда через UI')\n    @pytest.mark.teardown_required\n    def test_delete_build(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n        with allure.step('Создание проекта'):\n            super_admin.api_object.project_api.create_project(project_data.model_dump())\n        with allure.step('Создание билда'):\n            build_data = BuildData.create_build_data(project_data.id)\n            super_admin.api_object.build_api.create_build(build_data.model_dump())\n    \n        with allure.step(\"Удаление билда\"):\n            build_management_browser = BuildManagementPage(browser)\n>           build_management_browser.delete_build_ui(build_data.id, project_data.id)\n\ntests/frontend/test_e2e_build.py:70: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/build_management_page.py:46: in delete_build_ui\n    self.go_to_build_management_page(build_id)\npages/build_management_page.py:40: in go_to_build_management_page\n    self.actions.navigate(self.page_url.format(build_id=build_id))\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6d36abc0>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/viewType.html?buildTypeId=przTY1zPsXm&fromSakuraUI=true'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","steps":[{"name":"Подготовка данных","time":{"start":1712515612131,"stop":1712515612131,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Авторизация пользователя","time":{"start":1712515612131,"stop":1712515615073,"duration":2942},"status":"passed","steps":[{"name":"Переход на страницу авторизации","time":{"start":1712515612131,"stop":1712515613241,"duration":1110},"status":"passed","steps":[{"name":"Переход на URL: http://localhost:8111/login.html","time":{"start":1712515612131,"stop":1712515613236,"duration":1105},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ожидание загрузки страницы","time":{"start":1712515613236,"stop":1712515613241,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Ввод данных для авторизации","time":{"start":1712515613241,"stop":1712515613594,"duration":353},"status":"passed","steps":[{"name":"Ввод текста 'admin' в элемент #username","time":{"start":1712515613241,"stop":1712515613452,"duration":211},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ввод текста 'admin' в элемент #password","time":{"start":1712515613452,"stop":1712515613594,"duration":142},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Нажатие на кнопку 'Log in'","time":{"start":1712515613594,"stop":1712515613847,"duration":253},"status":"passed","steps":[{"name":"Клик по элементу: .loginButton","time":{"start":1712515613594,"stop":1712515613847,"duration":253},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Ожидание изменения URL на http://localhost:8111/favorite/projects","time":{"start":1712515613847,"stop":1712515615073,"duration":1226},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true},{"name":"Создание проекта","time":{"start":1712515615073,"stop":1712515615099,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Создание билда","time":{"start":1712515615099,"stop":1712515615121,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Удаление билда","time":{"start":1712515615121,"stop":1712515615398,"duration":277},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/tests/frontend/test_e2e_build.py\", line 70, in test_delete_build\n    build_management_browser.delete_build_ui(build_data.id, project_data.id)\n  File \"/home/runner/work/TeamCity/TeamCity/pages/build_management_page.py\", line 46, in delete_build_ui\n    self.go_to_build_management_page(build_id)\n  File \"/home/runner/work/TeamCity/TeamCity/pages/build_management_page.py\", line 40, in go_to_build_management_page\n    self.actions.navigate(self.page_url.format(build_id=build_id))\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на страницу управления билдом","time":{"start":1712515615121,"stop":1712515615397,"duration":276},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/pages/build_management_page.py\", line 40, in go_to_build_management_page\n    self.actions.navigate(self.page_url.format(build_id=build_id))\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на URL: http://localhost:8111/viewType.html?buildTypeId=przTY1zPsXm&fromSakuraUI=true","time":{"start":1712515615121,"stop":1712515615397,"duration":276},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"d5e1fdf2c2526d78","name":"log","source":"d5e1fdf2c2526d78.txt","type":"text/plain","size":3038}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":16,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"project_data_body::0","time":{"start":1712515615659,"stop":1712515615686,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1712515615687,"stop":1712515616888,"duration":1201},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session::0","time":{"start":1712515615687,"stop":1712515615687,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"Управление билдами"},{"name":"severity","value":"critical"},{"name":"story","value":"Удаление билда UI"},{"name":"tag","value":"teardown_required"},{"name":"parentSuite","value":"tests.frontend"},{"name":"suite","value":"test_e2e_build"},{"name":"host","value":"fv-az1113-955"},{"name":"thread","value":"9042-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.frontend.test_e2e_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser","value":"'firefox'"}],"links":[{"name":"Тест-кейс","url":"https://testcase.manager/testcase/456","type":"tms"},{"name":"Баг-трекер","url":"https://issue.tracker/project/123","type":"issue"},{"name":"Документация","url":"https://example.com/docs/create_project","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["teardown_required"]},"source":"421af56267ecc3b9.json","parameterValues":["'firefox'"]}