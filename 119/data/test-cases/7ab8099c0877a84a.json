{"uid":"7ab8099c0877a84a","name":"Проверка создания билда UI","fullName":"tests.frontend.test_e2e_build#test_create_build","historyId":"a05590f5fc3ef14a0dd36db969d20345","time":{"start":1712515559071,"stop":1712515562420,"duration":3349},"description":"Тест проверяет создание нового билда через UI","descriptionHtml":"<p>Тест проверяет создание нового билда через UI</p>\n","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6de3a290>\nsuper_admin = <entities.user.User object at 0x7f5d6dc62e00>\n\n    @allure.feature('Управление билдами')\n    @allure.story('Создание билда UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка создания билда UI')\n    @allure.description('Тест проверяет создание нового билда через UI')\n    @pytest.mark.teardown_required\n    def test_create_build(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n            build_data = BuildData.create_build_data(project_data.id)\n            build_name = build_data.name\n            build_id = build_data.id\n    \n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n    \n        with allure.step('Создание проекта'):\n            super_admin.api_object.project_api.create_project(project_data.model_dump())\n        with allure.step('Создание билда'):\n            build_creation_browser = BuildCreationPage(browser, project_data.id)\n>           build_creation_browser.create_ui_build(build_name, build_id, f'Описание билда {build_name}', project_data.id)\n\ntests/frontend/test_e2e_build.py:37: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/create_build_page.py:41: in create_ui_build\n    self.go_to_addition_build_page()\npages/create_build_page.py:24: in go_to_addition_build_page\n    self.actions.navigate(self.page_url)\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6dc60f10>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/admin/editProject.html?projectId=QV54ZOv2X7x'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1712515408505,"stop":1712515408527,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delay_between_tests","time":{"start":1712515552599,"stop":1712515557600,"duration":5001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1712515557600,"stop":1712515559062,"duration":1462},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"super_admin","time":{"start":1712515559062,"stop":1712515559070,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session","time":{"start":1712515559062,"stop":1712515559062,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"project_data_body","time":{"start":1712515559070,"stop":1712515559070,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Тест проверяет создание нового билда через UI","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6de3a290>\nsuper_admin = <entities.user.User object at 0x7f5d6dc62e00>\n\n    @allure.feature('Управление билдами')\n    @allure.story('Создание билда UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка создания билда UI')\n    @allure.description('Тест проверяет создание нового билда через UI')\n    @pytest.mark.teardown_required\n    def test_create_build(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n            build_data = BuildData.create_build_data(project_data.id)\n            build_name = build_data.name\n            build_id = build_data.id\n    \n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n    \n        with allure.step('Создание проекта'):\n            super_admin.api_object.project_api.create_project(project_data.model_dump())\n        with allure.step('Создание билда'):\n            build_creation_browser = BuildCreationPage(browser, project_data.id)\n>           build_creation_browser.create_ui_build(build_name, build_id, f'Описание билда {build_name}', project_data.id)\n\ntests/frontend/test_e2e_build.py:37: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/create_build_page.py:41: in create_ui_build\n    self.go_to_addition_build_page()\npages/create_build_page.py:24: in go_to_addition_build_page\n    self.actions.navigate(self.page_url)\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6dc60f10>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/admin/editProject.html?projectId=QV54ZOv2X7x'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","steps":[{"name":"Подготовка данных","time":{"start":1712515559071,"stop":1712515559071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Авторизация пользователя","time":{"start":1712515559071,"stop":1712515562187,"duration":3116},"status":"passed","steps":[{"name":"Переход на страницу авторизации","time":{"start":1712515559071,"stop":1712515560240,"duration":1169},"status":"passed","steps":[{"name":"Переход на URL: http://localhost:8111/login.html","time":{"start":1712515559071,"stop":1712515560234,"duration":1163},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ожидание загрузки страницы","time":{"start":1712515560234,"stop":1712515560240,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Ввод данных для авторизации","time":{"start":1712515560240,"stop":1712515560581,"duration":341},"status":"passed","steps":[{"name":"Ввод текста 'admin' в элемент #username","time":{"start":1712515560240,"stop":1712515560445,"duration":205},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ввод текста 'admin' в элемент #password","time":{"start":1712515560445,"stop":1712515560581,"duration":136},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Нажатие на кнопку 'Log in'","time":{"start":1712515560581,"stop":1712515560855,"duration":274},"status":"passed","steps":[{"name":"Клик по элементу: .loginButton","time":{"start":1712515560581,"stop":1712515560855,"duration":274},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Ожидание изменения URL на http://localhost:8111/favorite/projects","time":{"start":1712515560855,"stop":1712515562187,"duration":1332},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true},{"name":"Создание проекта","time":{"start":1712515562187,"stop":1712515562204,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Создание билда","time":{"start":1712515562204,"stop":1712515562419,"duration":215},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/tests/frontend/test_e2e_build.py\", line 37, in test_create_build\n    build_creation_browser.create_ui_build(build_name, build_id, f'Описание билда {build_name}', project_data.id)\n  File \"/home/runner/work/TeamCity/TeamCity/pages/create_build_page.py\", line 41, in create_ui_build\n    self.go_to_addition_build_page()\n  File \"/home/runner/work/TeamCity/TeamCity/pages/create_build_page.py\", line 24, in go_to_addition_build_page\n    self.actions.navigate(self.page_url)\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на страницу для создания билда","time":{"start":1712515562204,"stop":1712515562419,"duration":215},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/pages/create_build_page.py\", line 24, in go_to_addition_build_page\n    self.actions.navigate(self.page_url)\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на URL: http://localhost:8111/admin/editProject.html?projectId=QV54ZOv2X7x","time":{"start":1712515562204,"stop":1712515562419,"duration":215},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"74de51ed1fe38f0c","name":"log","source":"74de51ed1fe38f0c.txt","type":"text/plain","size":6409}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":15,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"project_data_body::0","time":{"start":1712515562665,"stop":1712515562692,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session::0","time":{"start":1712515562693,"stop":1712515562693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser::0","time":{"start":1712515562694,"stop":1712515563809,"duration":1115},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"Управление билдами"},{"name":"story","value":"Создание билда UI"},{"name":"severity","value":"critical"},{"name":"tag","value":"teardown_required"},{"name":"parentSuite","value":"tests.frontend"},{"name":"suite","value":"test_e2e_build"},{"name":"host","value":"fv-az1113-955"},{"name":"thread","value":"9042-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.frontend.test_e2e_build"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser","value":"'firefox'"}],"links":[{"name":"Тест-кейс","url":"https://testcase.manager/testcase/456","type":"tms"},{"name":"Баг-трекер","url":"https://issue.tracker/project/123","type":"issue"},{"name":"Документация","url":"https://example.com/docs/create_project","type":"link"}],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"4a75d662e05b485b","status":"broken","statusDetails":"playwright._impl._errors.Error: NS_BINDING_ABORTED","time":{"start":1712515547547,"stop":1712515551048,"duration":3501}},{"uid":"ba3411fb1a274ac9","status":"broken","statusDetails":"playwright._impl._errors.Error: NS_BINDING_ABORTED","time":{"start":1712515536345,"stop":1712515539680,"duration":3335}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":1,"unknown":0,"total":2},"items":[{"uid":"dce17e6b8d31a9ac","reportUrl":"https://filangelin.github.io/TeamCity/118//#testresult/dce17e6b8d31a9ac","status":"passed","time":{"start":1712513631348,"stop":1712513638685,"duration":7337}}]},"tags":["teardown_required"]},"source":"7ab8099c0877a84a.json","parameterValues":["'firefox'"]}