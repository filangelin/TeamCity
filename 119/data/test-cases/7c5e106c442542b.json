{"uid":"7c5e106c442542b","name":"Проверка создания проекта UI","fullName":"tests.frontend.test_e2e_project#test_create_project","historyId":"4a54a945656e84c337baecab93b092fa","time":{"start":1712515740145,"stop":1712515743186,"duration":3041},"description":"Тест проверяет создание нового проекта через UI","descriptionHtml":"<p>Тест проверяет создание нового проекта через UI</p>\n","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6ddb5fc0>\nsuper_admin = <entities.user.User object at 0x7f5d6d368ca0>\n\n    @allure.feature('Управление проектами')\n    @allure.story('Создание проекта UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка создания проекта UI')\n    @allure.description('Тест проверяет создание нового проекта через UI')\n    @pytest.mark.teardown_required\n    def test_create_project(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n            project_id = project_data.id\n            project_name = project_data.name\n    \n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n        with allure.step(\"Создание проекта\"):\n            project_creation_browser = ProjectCreationPage(browser)\n>           project_creation_browser.create_project(project_name, project_id, f'Описание проекта {project_name}')\n\ntests/frontend/test_e2e_project.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/create_project_page.py:66: in create_project\n    self.go_to_creation_page()\npages/create_project_page.py:62: in go_to_creation_page\n    self.actions.navigate(self.page_url)\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6de27bb0>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/admin/createObjectMenu.html?projectId=_Root&showMode=createProjectMenu&cameFromUrl=http%3A%2F%2Flocalhost%3A8111%2Ffavorite%2Fprojects'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1712515408505,"stop":1712515408527,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delay_between_tests","time":{"start":1712515733761,"stop":1712515738765,"duration":5004},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"browser","time":{"start":1712515738765,"stop":1712515740135,"duration":1370},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"super_admin","time":{"start":1712515740136,"stop":1712515740144,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session","time":{"start":1712515740136,"stop":1712515740136,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"project_data_body","time":{"start":1712515740144,"stop":1712515740144,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Тест проверяет создание нового проекта через UI","status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?isReloaded=true'>\nproject_data_body = <function project_data_body.<locals>._create_project_data at 0x7f5d6ddb5fc0>\nsuper_admin = <entities.user.User object at 0x7f5d6d368ca0>\n\n    @allure.feature('Управление проектами')\n    @allure.story('Создание проекта UI')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.link('https://example.com/docs/create_project', name='Документация')\n    @allure.issue('https://issue.tracker/project/123', name='Баг-трекер')\n    @allure.testcase('https://testcase.manager/testcase/456', name='Тест-кейс')\n    @allure.title('Проверка создания проекта UI')\n    @allure.description('Тест проверяет создание нового проекта через UI')\n    @pytest.mark.teardown_required\n    def test_create_project(browser, project_data_body, super_admin):\n        with allure.step(\"Подготовка данных\"):\n            project_data = project_data_body()\n            project_id = project_data.id\n            project_name = project_data.name\n    \n        with allure.step(\"Авторизация пользователя\"):\n            login_browser = LoginPage(browser)\n            login_browser.login(AdminCreds.USERNAME, AdminCreds.PASSWORD)\n        with allure.step(\"Создание проекта\"):\n            project_creation_browser = ProjectCreationPage(browser)\n>           project_creation_browser.create_project(project_name, project_id, f'Описание проекта {project_name}')\n\ntests/frontend/test_e2e_project.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/create_project_page.py:66: in create_project\n    self.go_to_creation_page()\npages/create_project_page.py:62: in go_to_creation_page\n    self.actions.navigate(self.page_url)\nactions/page_actions.py:11: in navigate\n    self.page.goto(url)\n../../../.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py:9327: in goto\n    self._sync(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_page.py:484: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_frame.py:149: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:63: in send\n    return await self._connection.wrap_api_call(\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:495: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f5d6de27bb0>\nmethod = 'goto'\nparams = {'url': 'http://localhost:8111/admin/createObjectMenu.html?projectId=_Root&showMode=createProjectMenu&cameFromUrl=http%3A%2F%2Flocalhost%3A8111%2Ffavorite%2Fprojects'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.Error: NS_BINDING_ABORTED\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_connection.py:101: Error","steps":[{"name":"Подготовка данных","time":{"start":1712515740145,"stop":1712515740145,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Авторизация пользователя","time":{"start":1712515740145,"stop":1712515742998,"duration":2853},"status":"passed","steps":[{"name":"Переход на страницу авторизации","time":{"start":1712515740145,"stop":1712515741234,"duration":1089},"status":"passed","steps":[{"name":"Переход на URL: http://localhost:8111/login.html","time":{"start":1712515740145,"stop":1712515741227,"duration":1082},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ожидание загрузки страницы","time":{"start":1712515741227,"stop":1712515741234,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Ввод данных для авторизации","time":{"start":1712515741234,"stop":1712515741564,"duration":330},"status":"passed","steps":[{"name":"Ввод текста 'admin' в элемент #username","time":{"start":1712515741234,"stop":1712515741421,"duration":187},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Ввод текста 'admin' в элемент #password","time":{"start":1712515741421,"stop":1712515741564,"duration":143},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true},{"name":"Нажатие на кнопку 'Log in'","time":{"start":1712515741564,"stop":1712515741815,"duration":251},"status":"passed","steps":[{"name":"Клик по элементу: .loginButton","time":{"start":1712515741564,"stop":1712515741815,"duration":251},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Ожидание изменения URL на http://localhost:8111/favorite/projects","time":{"start":1712515741815,"stop":1712515742998,"duration":1183},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true},{"name":"Создание проекта","time":{"start":1712515742998,"stop":1712515743185,"duration":187},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/tests/frontend/test_e2e_project.py\", line 31, in test_create_project\n    project_creation_browser.create_project(project_name, project_id, f'Описание проекта {project_name}')\n  File \"/home/runner/work/TeamCity/TeamCity/pages/create_project_page.py\", line 66, in create_project\n    self.go_to_creation_page()\n  File \"/home/runner/work/TeamCity/TeamCity/pages/create_project_page.py\", line 62, in go_to_creation_page\n    self.actions.navigate(self.page_url)\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на страницу создания проекта","time":{"start":1712515742999,"stop":1712515743185,"duration":186},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/pages/create_project_page.py\", line 62, in go_to_creation_page\n    self.actions.navigate(self.page_url)\n  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"Переход на URL: http://localhost:8111/admin/createObjectMenu.html?projectId=_Root&showMode=createProjectMenu&cameFromUrl=http%3A%2F%2Flocalhost%3A8111%2Ffavorite%2Fprojects","time":{"start":1712515742999,"stop":1712515743185,"duration":186},"status":"broken","statusMessage":"playwright._impl._errors.Error: NS_BINDING_ABORTED\n","statusTrace":"  File \"/home/runner/work/TeamCity/TeamCity/actions/page_actions.py\", line 11, in navigate\n    self.page.goto(url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 9327, in goto\n    self._sync(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 484, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 149, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 63, in send\n    return await self._connection.wrap_api_call(\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 495, in wrap_api_call\n    return await cb()\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 101, in inner_send\n    result = next(iter(done)).result()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"3c3e266363b8b383","name":"log","source":"3c3e266363b8b383.txt","type":"text/plain","size":1381}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":14,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"project_data_body::0","time":{"start":1712515743507,"stop":1712515743517,"duration":10},"status":"broken","statusMessage":"ValueError: Unexpexted status-code: 404\n","statusTrace":"  File \"/home/runner/.local/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/.local/lib/python3.10/site-packages/_pytest/fixtures.py\", line 926, in _teardown_yield_fixture\n    next(it)\n  File \"/home/runner/work/TeamCity/TeamCity/conftest.py\", line 51, in project_data_body\n    super_admin.api_object.project_api.clean_up_project(project_id)\n  File \"/home/runner/work/TeamCity/TeamCity/api/project_api.py\", line 21, in clean_up_project\n    self.delete_project(created_project_id)\n  File \"/home/runner/work/TeamCity/TeamCity/api/project_api.py\", line 18, in delete_project\n    return self.send_request(\"DELETE\", f\"/app/rest/projects/id:{project_id}\", expected_status_code=expected_status)\n  File \"/home/runner/work/TeamCity/TeamCity/custom_requester/custom_requester.py\", line 29, in send_request\n    raise ValueError(f\"Unexpexted status-code: {response.status_code}\")\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true},{"name":"browser::0","time":{"start":1712515743518,"stop":1712515744597,"duration":1079},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"user_session::0","time":{"start":1712515743518,"stop":1712515743518,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"severity","value":"critical"},{"name":"story","value":"Создание проекта UI"},{"name":"feature","value":"Управление проектами"},{"name":"tag","value":"teardown_required"},{"name":"parentSuite","value":"tests.frontend"},{"name":"suite","value":"test_e2e_project"},{"name":"host","value":"fv-az1113-955"},{"name":"thread","value":"9042-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.frontend.test_e2e_project"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser","value":"'firefox'"}],"links":[{"name":"Тест-кейс","url":"https://testcase.manager/testcase/456","type":"tms"},{"name":"Баг-трекер","url":"https://issue.tracker/project/123","type":"issue"},{"name":"Документация","url":"https://example.com/docs/create_project","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["teardown_required"]},"source":"7c5e106c442542b.json","parameterValues":["'firefox'"]}